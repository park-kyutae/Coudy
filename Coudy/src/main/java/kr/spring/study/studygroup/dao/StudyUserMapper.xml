<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.spring.study.studygroup.dao.StudyUserMapper">
    <select id="selectListStudyUser" parameterType="map"
            resultType="StudyUserVO">
        SELECT
        *
        FROM (SELECT
        a.*,
        rownum rnum
        FROM (SELECT
        s.study_user_num,
        s.mem_num
        FROM study_user s JOIN member m
        ON s.mem_num = m.mem_num
        ORDER BY s.study_num DESC)a)
        <![CDATA[
  		WHERE rnum >= #{start} AND rnum <= #{end}
  		]]>
    </select>
    <!-- 글수정 -->
    <update id="updateStudyUser" parameterType="studyuserVO">
        UPDATE study_user SET
        registered=#{registered},
        WHERE study_user_num=#{study_users_num}
    </update>

    <!-- 댓글 목록
    {이거는 위에 꺼
    <if test="filename != ''">
            uploadfile=#{uploadfile},
            filename=#{filename},
        </if>}

    <select id="selectListReply" parameterType="map"
            resultType="boardReplyVO">
        SELECT
            *
        FROM (SELECT
                  a.*,
                  rownum rnum
              FROM (SELECT
                        re_num,
  		              <![CDATA[
                        REPLACE(REPLACE(re_content,'<','&lt;'),'>','&gt;') re_content,
  		              ]]>
  		              re_date,
                        re_mdate,
                        board_num,
                        mem_num,
                        id,
                        nick_name
                    FROM spboard_reply
                             JOIN spmember USING(mem_num)
                    WHERE board_num = #{board_num}
                    ORDER BY re_num DESC)a)
  		<![CDATA[
        WHERE rnum >= #{start} AND rnum <= #{end}
        ]]>
    </select>
    -->
</mapper>







